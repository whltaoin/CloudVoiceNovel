# 环境搭建、启动命令、组件规范

## 开发环境搭建

### 前提条件
- Node.js 16.x 或更高版本
- npm 或 yarn
- Git
- React Native 开发环境（针对移动开发）

### 安装步骤
1. **克隆仓库**
   ```bash
   git clone [仓库地址]
   cd CloudVoiceNovel/frontend
   ```

2. **安装依赖**
   ```bash
   npm install
   # 或
   yarn install
   ```

3. **安装 React Native 依赖**
   ```bash
   npx pod-install  # iOS 依赖
   ```

4. **配置环境变量**
   - 复制 `.env.example` 文件为 `.env`
   - 填写相应的环境变量

## 启动命令

### Web 开发
```bash
npm run web
# 或
npm start
```

### iOS 开发
```bash
npm run ios
# 或
npx react-native run-ios
```

### Android 开发
```bash
npm run android
# 或
npx react-native run-android
```

### 使用 Capacitor
```bash
# 构建 Web 版本
npm run build

# 同步到 iOS
npx cap sync ios
npx cap open ios

# 同步到 Android
npx cap sync android
npx cap open android
```

## 组件规范

### 文件结构
```
src/
├── components/         # 通用组件
│   ├── common/         # 基础UI组件
│   ├── layouts/        # 布局组件
│   └── modules/        # 业务组件
├── screens/            # 页面组件
├── navigation/         # 导航配置
├── services/           # API服务
├── store/              # 状态管理
├── hooks/              # 自定义hooks
├── utils/              # 工具函数
└── assets/             # 静态资源
```

### 组件命名规范
- 使用 PascalCase（大驼峰）命名组件文件和组件名
- 例如：`AudioPlayer.tsx`、`NovelList.tsx`

### 组件开发规范
1. **组件拆分原则**
   - 单一职责原则：一个组件只负责一种功能
   - 可复用性：设计通用组件时应考虑复用场景

2. **Props 定义**
   - 使用 TypeScript 接口定义组件 Props
   - 必填 Props 使用 `required` 标记

3. **状态管理**
   - 组件内部状态使用 `useState`
   - 全局状态通过 Redux/MobX 或 Context API 管理

4. **样式规范**
   - 使用 `StyleSheet.create` 创建样式
   - 遵循主题色系统
   - 响应式设计适配不同屏幕

5. **注释规范**
   - 组件功能说明
   - Props 参数说明
   - 复杂逻辑说明

### 代码规范
- 使用 ESLint 和 Prettier 确保代码质量
- 遵循 React Native 最佳实践
- 避免不必要的渲染
- 合理使用 `React.memo`、`useCallback`、`useMemo`

## 测试规范
- 使用 Jest 进行单元测试
- 使用 React Testing Library 进行组件测试
- 关键功能需编写测试用例

## 提交规范
- 提交信息使用语义化提交格式
- 例如：`feat: 添加音频播放器组件`、`fix: 修复播放进度保存问题`

## 其他注意事项
- 确保代码兼容性，支持 iOS 和 Android 平台
- 性能优化：避免大列表、合理使用缓存
- 安全性：敏感信息加密存储、避免硬编码密钥